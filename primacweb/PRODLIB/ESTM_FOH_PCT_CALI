SUBROUTINE ESTM_FOH_PCT
********************************************************************************
*   Program name :- ESTM_FOH_PCT
*   Created:- 7/18/2003
*------------------------------------------------------------------------------*
*
*  This server event is triggered from within the {m:WW:uObject=ReadData}, {m- *
*  :WW:uObject=DeleteData} and {m:WW:uObject=WriteData} server events. In eac- *
*  h case, this {m:WW:uObject=PostRead} event occurs after the physical datab- *
*  ase read, but before values are extracted from the database record. This p- *
*  rovides a window of opportunity in which the database values may be direct- *
*  ly manipulated. The API functions
*  RBO.setDBVals() and RBO.getDBVals() are - *
*  used to do this.
*  
*                - *

* In Properties:
* --------------
*  
*
* Out Properties:
* ---------------
*  
********************************************************************************
$INCLUDE WWINSERT RBO.H
* Insert method code here
$INCLUDE CPYLIB CHAR

ERRMSG =""
STR=""
OPEN '','CONTROL' TO CONTROL ELSE
      ERRMSG = 'Cannot open CONTROL file!'
      GOTO 93000
   END

ERRMSG = RBO.getDBVals('ESTM_FOH_PCT',PCT)
ERRMSG = RBO.getDBVals('ESTM_MARKUP',MARKUP)
ERRMSG=  RBO.getDBVals('ESTM_QCOST',COST)
CNT =DCOUNT(PCT,"ý")
	FOR I=1 TO CNT
		STR<1,I> =  OCONV(PCT<1,I>,"MD2") 
	NEXT I

CNT1 =DCOUNT(MARKUP,"ý")
STR1=""
FOR J=1 TO CNT1
	STR1<1,J> =  OCONV(MARKUP<1,J>,"MD2") 
NEXT J


ERRMSG =RBO.setDBVals('ESTM_FOH_PCT',STR)
ERRMSG =RBO.setDBVals('ESTM_MARKUP',STR1)
 WRITE STR1 ON CONTROL,"MARK"
WRITE STR ON CONTROL,"PCT"



* End of method code
RETURN
93000*
   IF ERRMSG # "" THEN
      STATUS = RBO.setProperty('', 'ServerStatus', 1)
      STATUS = RBO.setProperty('', 'ServerMessage', ERRMSG)
   END
* End of method code
RETURN

