$INCLUDE WWINSERT RBO.H

  OPEN '','CONTROL' TO CONTROL ELSE STOP
	STATUS = RBO.getProperty('', 'ID', IDVAL)

REPORT_ID  = FIELD(IDVAL,"!",4)
CONO = FIELD(IDVAL, "!", 5)
   CALL REPORT_SCRN(CONO,REPORT_ID)
NCNT = 0 
  
READ PROC.VALUES FROM CONTROL,"REPORT_VALUES" THEN
END

REPORT_ID = FIELD(PROC.VALUES<2>,",",1)

CMD = "SSELECT CKREV WITH CONO = " : PROC.VALUES<1>
IF PROC.VALUES<3> # "ALL" THEN
   CMD := " AND WITH CKRV_DIV = " : PROC.VALUES<3>
END
STATUS = RBO.setProperty('','PPDField10',CMD)
UDTEXECUTE CMD

STACK ="CK.REV"
CALL GET_SELNAME_N(STACK)

CMD1 = 'SAVE.LIST ':STACK 
UDTEXECUTE CMD1

CMD2 = "GET.LIST " : STACK 
UDTEXECUTE CMD2

 DATA1 = 1
LOOP
READNEXT ID ELSE DATA1=0
 WHILE DATA1=1 DO
	NCNT= NCNT + 1
REPEAT	

IF NCNT > 0 THEN
	CALL CKREV_RPT(PROC.VALUES<1>,REPORT_ID,STACK)
END ELSE
   STACK = ""
END

STATUS = RBO.setProperty('','STACK',STACK)
END

