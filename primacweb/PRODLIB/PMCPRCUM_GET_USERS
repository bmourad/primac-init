SUBROUTINE PMCPRCUM_GET_USERS
********************************************************************************
*   Program name :- PMCPRCUM_GET_USERS
*   Created:- 3/7/2006
*------------------------------------------------------------------------------*
*

* In Properties:
* --------------
*  
*
* Out Properties:
* ---------------
*  
********************************************************************************
$INCLUDE WWINSERT RBO.H

OPEN '','SECURITY' TO SECURITY ELSE ERRMSG = 'CANNOT OPEN SECURITY FILE'; GOTO 93000

STATUS = RBO.getProperty('','PMCProperty',PMCProperty)
STATUS = RBO.getProperty('','UserId',IDVAL)
IDVAL = ''
CONO = PMCProperty<1,4>

IF IDVAL = '' THEN
	CMD = "SSELECT SECURITY WITH @ID LIKE '":CONO:"...'"
END ELSE
*CALL THE METHOD TO POPULATE ALL THE PROCESSES FOR THIS USER
       CMD = "SSELECT SECURITY WITH @ID = '":CONO:IDVAL:"'"
END
UDTEXECUTE CMD CAPTURING XYZ
IDLIST = ''
DONE=1
LOOP
READNEXT ID THEN
	IF ID[2,1] NE "." THEN IDLIST<1,-1> = ID
END ELSE
	DONE=0
END
WHILE DONE
REPEAT
IF IDLIST = '' THEN
	ERRMSG = 'CANNOT FIND ' :CONO:IDVAL
	GOTO 93000
END
STATUS = RBO.setProperty('','ACTUAL_USER',IDLIST)
RETURN

93000:
	STATUS = RBO.setProperty('','ServerStatus',1)
	STATUS = RBO.setProperty('','ServerMessage',ERRMSG)
RETURN
