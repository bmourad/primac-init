SUBROUTINE GET_CCTR_CODESDESC
********************************************************************************
*   Program name :- GET_CCTR_CODESDESC
*   Created:- 3/29/2006
*------------------------------------------------------------------------------*
*

* In Properties:
* --------------
*  
*
* Out Properties:
* ---------------
*  
********************************************************************************
$INCLUDE WWINSERT RBO.H
$INCLUDE PMC.CPYLIB COST.CNTR
$INCLUDE PMC.CPYLIB DEPARTMENT
* Insert method code here
CMD=''
AllValues=''
VAL=''
CCTR_CODES=''
CCTR_DESCS=''


CMD1=''
ID=''
DEPT_CODES=''
DEPT_DESCS=''

OPEN "","DEPARTMENT" TO DEPARTMENT ELSE ERRMSG = "DEPARTMENT FILE IS MISSING" ;GOTO 99999

OPEN '', 'COST.CNTR' TO F.CCTR ELSE 
	ERRMSG = "COST.CNTR FILE IS MISSING"
	GOTO 99999
END

CMD="SSELECT COST.CNTR WITH @ID LIKE '001...' "
UDTEXECUTE CMD CAPTURING MESG

DATA = 1
LOOP
	READNEXT VAL THEN
		*AllValues<1,-1> = VAL
		MATREAD CCTR.REC FROM F.CCTR,VAL ELSE
			MAT CCTR.REC = ''
		END
		CCTR_CODES<1,-1> = VAL[4,99]
		CCTR_DESCS<1,-1> = VAL[4,99] :"-":CCTR.DESC
		
	END ELSE
		
		DATA = 0

	END

WHILE DATA DO
REPEAT





CMD1="SSELECT DEPARTMENT WITH @ID LIKE '001...' "
UDTEXECUTE CMD1 CAPTURING MESG1

DAT = 1
LOOP
	READNEXT ID THEN
		*AllValues<1,-1> = VAL
		 MATREAD DEPT.REC FROM DEPARTMENT,ID ELSE	
			MAT DEPT.REC = ''
		END
		DEPT_CODES<1,-1> = ID[4,99]
		DEPT_DESCS<1,-1> = ID[4,99] :"-":DEPT.DESC		
	END ELSE
		
		DAT = 0

	END

WHILE DAT DO
REPEAT



STATUS = RBO.setProperty('','CCTRCODES',CCTR_CODES)
STATUS = RBO.setProperty('','CCTRDESC',CCTR_DESCS)

STATUS = RBO.setProperty('','DEPT_CODES',DEPT_CODES)
STATUS = RBO.setProperty('','DEPT_DESCS',DEPT_DESCS)



* End of method code
RETURN
99999
       STATUS = RBO.setProperty('','ServerStatus',1)
       STATUS = RBO.setProperty('','ServerMessage',ERRMSG)
   
RETURN


