SUBROUTINE EST_JOBCATEGORY
********************************************************************************
*   Program name :- EST_JOBCATEGORY
*   Created:- 11/5/2004 RAZI Mohiuddin
*------------------------------------------------------------------------------*
*  
********************************************************************************
$INCLUDE WWINSERT RBO.H
$INCLUDE JCS.CPYLIB JOB.CATEGORY



OPEN '','JOB.CATEGORY' TO JOB.CATEGORY ELSE ERRMSG = 'Cannot open JOB.CATEGORY file!'


CATIDS=''
CATDESC=''
CATCODDSC=''

STATUS = RBO.getProperty('', 'PMCProperty', PMCProperty)
CONO   = PMCProperty<1,4>

CMD="SSELECT JOB.CATEGORY WITH @ID LIKE '":CONO:"...'"
UDTEXECUTE CMD
DATA = 1
S=1
LOOP
    READNEXT CODE ELSE DATA = 0
WHILE DATA DO

	MATREAD JCATG.REC FROM JOB.CATEGORY, CODE THEN 
		CATIDS<1,S> = CODE[4,99]
		CATCODDSC<1,S>=CODE[4,99]:" ":JCATG.DESC
       END
       S=S+1
REPEAT

SWAP "'" WITH "" IN CATCODDSC 
SWAP '"' WITH "" IN CATCODDSC


STATUS = RBO.setProperty('','JCATIDS',CATIDS)
STATUS = RBO.setProperty('','JCATDESC',CATCODDSC)


RETURN

90000*
   STATUS = RBO.setProperty('','ServerStatus',1)
   STATUS = RBO.setProperty('','ServerMessage',ERRMSG)
RETURN



