SUBROUTINE ORDM_SET_ORDER
********************************************************************************
*   Program name :- ORDM_SET_ORDER
*   Created:- 9/10/2004
*------------------------------------------------------------------------------*
*

* In Properties:
* --------------
*  
*
* Out Properties:
* ---------------
*  
********************************************************************************
$INCLUDE WWINSERT RBO.H
$INCLUDE ICS.CPYLIB INV.CNV
$INCLUDE CPYLIB CHAR
* Insert method code here
SERVER_MSG = ""
DIM TEMP.MF(2)
MAT TEMP.MF = ""

	STATUS = RBO.getProperty('', 'OSD_PROD', VALUES)
 	STATUS = RBO.getProperty('', 'PMCProperty', PMCPropertyy)		
	OSD_PRODUCT   = VALUES<1,1>
	ICR.DV1       = VALUES<1,2>
 	ICR.DV2       = VALUES<1,3>
	ICR.MT1       = VALUES<1,4>
	ICR.MT2       = VALUES<1,5>
	ICR.CNV1      = VALUES<1,6>
	ICR.CNV       = VALUES<1,7>
	CUST.ADDL.OPS = VALUES<1,8>
	AVL.RESV      = VALUES<1,9>
	AVL.ALOC      = VALUES<1,10>
	VALUE         = VALUES<1,11>

	TEMP.MF(1) = INT(((VALUE / ICR.MT1) * ICR.DV1) * ICR.DV2 + .5)
       TEMP.MF(2) = INT((VALUE * (1 + (CUST.ADDL.OPS<1,1> / 10000))) + .5)
       TEMP.MF(2) = INT(((TEMP.MF(2) / ICR.MT1) * ICR.DV1) * ICR.DV2 + .5)
       P_VALUE    = OCONV(INT(((TEMP.MF(1) / ICR.DV1) * ICR.MT1) / ICR.DV2 + .5),ICR.CNV1) 
	QOH        = OCONV(INT(AVL.RESV / ICR.DV1 * ICR.MT1 / ICR.DV2 + .5),ICR.CNV1)
	AMQ	    = OCONV(INT(AVL.ALOC / ICR.DV1 * ICR.MT1 / ICR.DV2 + .5),ICR.CNV1)
	MAXV 	    = INT(((AVL.RESV / ICR.DV1) * ICR.MT1) / ICR.DV2 + .5)

	BEGIN CASE
	    CASE AVL.RESV < TEMP.MF(2)
	      DEFAULT = AVL.RESV
	    CASE 1
	      DEFAULT = TEMP.MF(2)
	END CASE
  	DEFAULT = OCONV(INT(((DEFAULT / ICR.DV1) * ICR.MT1) / ICR.DV2 + .5),ICR.CNV)

	CALL ORDM_IS_KIT(SERVER_MSG,OSD_PRODUCT,PMCPropertyy)

	STATUS = RBO.setProperty('', 'ServerMessage', SERVER_MSG : VM : TEMP.MF(1) : VM : TEMP.MF(2) : VM : P_VALUE :VM : QOH : VM : DEFAULT : VM : MAXV : VM : AMQ)
* End of method code
RETURN

