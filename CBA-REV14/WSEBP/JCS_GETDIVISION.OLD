 SUBROUTINE JCS_GETDIVISION(CONO,OUTPUTXML,SCHEMA.ONLY)
 *************************************************
OUTPUTXML='<DivisionId></DivisionId>'
SCHEMA.ONLY = 1
ERRMSG=""
CNT = 1
$INCLUDE PMC.CPYLIB DIVISION
$INCLUDE PMC.CPYLIB COMPANY
OPEN "COMPANY" TO COMPANY ELSE ERRMSG="CANNOT OPEN COMPANY FILE";GOTO 99999
OPEN 'DIVISION' TO DIVISION ELSE ERRMSG="CANNOT OPEN DIVISION FILE" ; GOTO 99999
MATREAD COMP.REC FROM COMPANY,CONO ELSE
       ERRMSG=CONO:"- THIS COMPANY NUMBER DOES NOT EXIST"
      GOTO 99999
END
CMD= "SSELECT DIVISION WITH @ID LIKE '" : CONO : "...'"
UDTEXECUTE CMD
DATA=1
LOOP
 READNEXT ID ELSE DATA=0
 WHILE DATA DO
 SCHEMA.ONLY = 0
 IF CNT = 1 THEN 
 OUTPUTXML="<DivisionId>" : ID[4,99] : "</DivisionId>"
 END ELSE
 OUTPUTXML:="<DivisionId>" : ID[4,99] : "</DivisionId>"
 END
 CNT = CNT + 1
REPEAT
CLEARSELECT
RETURN
99999*
IF ERRMSG <> "" THEN
     ERRMSG = "GetDivisionList ----> JCS_GETDIVISIONLIST --->": ERRMSG
     CALL WRITELOG(ERRMSG)
END
RETURN
