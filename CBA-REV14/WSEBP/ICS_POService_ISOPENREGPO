*SUBROUTINE ICS_GETPURCHASEORDER_GETREGULARPO(CONO,PO,SCHEMA.ONLY, ERRMSG, STRXML) ;*COMMENTED BY MAGAFOOR
SUBROUTINE ICS_POService_ISOPENREGPO(CONO,PO.CODE,SCHEMA.ONLY, ERRMSG, STRXML)
*STRXML = '<PO><PO_Open></PO_Open></PO>';*COMMENTED BY MAGAFOOR
$INCLUDE PMC.CPYLIB PO
OPEN '','PO' TO PO ELSE
  ERRMSG = "CANNOT OPEN PO FILE"
  RETURN
END
OPEN '','CONTROL' TO CONTROL ELSE STOP
FLG = 0
*PO.CODE = CONO:PO
PO.CODE = CONO:PO.CODE;* ADDED BY MAGAFOOR
WRITE "PO NUMBER IS ...":PO.CODE ON CONTROL,"SAJ09"
MATREAD PO.REC FROM PO,PO.CODE ELSE
  MAT PO.REC = ""
END
QCNT = DCOUNT(PO.PROD.NUM,@VM)
FOR MV.NUM = 1 TO QCNT
  IF PO.QTY.OPEN<1,MV.NUM> + 0 > 0 THEN
    FLG = 1
*    STRXML := '<PO><PO_Open>':FLG:'</PO_Open></PO>'
  END ELSE
    FLG = 0
*    STRXML := '<PO><PO_Open>':FLG:'</PO_Open></PO>'
  END
NEXT MV.NUM
STRXML := '<Payload><PO_Num>':PO.CODE[4,99]:'</PO_Num> <PO_Open>':FLG:'</PO_Open></Payload>'
RETURN
