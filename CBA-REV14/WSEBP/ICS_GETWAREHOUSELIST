SUBROUTINE ICS_GETWAREHOUSELIST(CONO, SCHEMA.ONLY, ERRMSG, STRXML)
STRXML = '<Inventory><WarehouseId></WarehouseId><WarehouseDescription>--Select--</WarehouseDescription></Inventory>'
$INCLUDE ICS.CPYLIB WAREHOUSE
OPEN "","WAREHOUSE" TO WAREHOUSE ELSE
           ERRMSG = "CANNOT OPEN WAREHOUSE FILE"
           RETURN
END
CMD= "SSELECT WAREHOUSE WITH @ID LIKE '" : CONO : "...'"
UDTEXECUTE CMD
DATA=1
LOOP
  READNEXT ID ELSE DATA=0
  WHILE DATA DO
    STRXML := '<Inventory><WarehouseId>' : ID[4,99] : '</WarehouseId>'
    MATREAD WHSE.REC FROM WAREHOUSE, ID THEN
      STRXML := '<WarehouseDescription>' : WHS.DESC : '</WarehouseDescription></Inventory>'
    END
REPEAT
RETURN
