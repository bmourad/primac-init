SUBROUTINE JCS_GETSALESCODES(CONO,OUTPUTXML,SCHEMA.ONLY)
 *************************************************
*OUTPUTXML ='<SalesCode><SalesCodeId></SalesCodeId><SalesCodeDescription></SalesCodeDescription></SalesCode>'
*OUTPUTXML ='<SalesCode><SalesCodeId></SalesCodeId><SalesCodeName></SalesCodeName><Display></Display></SalesCode>'
SCHEMA.ONLY = 1
ERRMSG=""
CNT = 1
 $INCLUDE PMC.CPYLIB SALES.CODE
 $INCLUDE PMC.CPYLIB COMPANY
 OPEN "COMPANY" TO COMPANY ELSE ERRMSG="CANNOT OPEN COMPANY FILE";GOTO 99999
 OPEN 'SALES.CODE' TO SALES.CODE ELSE ERRMSG="CANNOT OPEN SALES.CODE FILE" ; GOTO 99999
******JQ
** MATREAD COMP.REC FROM COMPANY,CONO ELSE
*       ERRMSG=CONO:"- THIS COMPANY NUMBER DOES NOT EXIST"
*       GOTO 99999
* END 
 IF CONO = "*" THEN
CMD= "SSELECT SALES.CODE"
END ELSE
MATREAD COMP.REC FROM COMPANY,CONO ELSE
ERRMSG=CONO:"- THIS COMPANY NUMBER DOES NOT EXIST"
 GOTO 99999
END
 CMD= "SSELECT SALES.CODE WITH @ID LIKE '" : CONO : "...'"
END
 UDTEXECUTE CMD
 DATA=1
 LOOP
 READNEXT ID ELSE DATA=0
 WHILE DATA DO
 MATREAD SLC.REC FROM SALES.CODE,ID THEN
   SCHEMA.ONLY = 0
*   IF CNT = 1 THEN 
*   OUTPUTXML="<SalesCode>"
*   END ELSE
   OUTPUTXML:="<SalesCode>"
*   END
   OUTPUTXML := "<Cono>" : ID[1,3] : "</Cono>"
   OUTPUTXML:="<SalesCodeId>":ID[4,99]:"</SalesCodeId>"
   OUTPUTXML:="<SalesCodeName>":SLC.DESC:"</SalesCodeName>"
   OUTPUTXML:="<Display>": ID[4,99]:"-":SLC.DESC:"</Display>"
   OUTPUTXML:="</SalesCode>"
   CNT = CNT + 1
END 
REPEAT
CLEARSELECT
RETURN
99999*
IF ERRMSG <> "" THEN
ERRMSG="GetSalesCodes ----> JCS_GETSALESCODES --->": ERRMSG
     CALL WRITELOG(ERRMSG)
END
RETURN
