 SUBROUTINE JCS_GETALLCOMPANYLIST(OUTPUTXML,SCHEMA.ONLY)
OUTPUTXML='<Division><Cono></Cono><DivisionId></DivisionId><DivisionName></DivisionName><Display></Display></Division>'
SCHEMA.ONLY = 1
ERRMSG=""
CNT = 1
$INCLUDE PMC.CPYLIB COMPANY
$INCLUDE PMC.CPYLIB DIVISION
 OPEN "COMPANY" TO COMPANY ELSE ERRMSG="CANNOT OPEN COMPANY FILE";GOTO 99999
OPEN 'DIVISION' TO DIVISION ELSE ERRMSG="CANNOT OPEN DIVISION FILE" ; GOTO 99999
 CMD= "SSELECT COMPANY"
UDTEXECUTE CMD
 DATA=1 
 OUTPUTXML := "<Cono>" : CONO : "</Cono>"
LOOP
READNEXT ID ELSE DATA=0
WHILE DATA DO
SCHEMA.ONLY = 0
IF CNT = 1 THEN
 OUTPUTXML="<Company>":ID:"</Company>"
END ELSE
OUTPUTXML:="<Company>":ID:"</Company>"
DIV.DESC = ''
READV DIV.DESC FROM DIVISION,ID, 1 ELSE DIV.DESC=''
OUTPUTXML:="<DivisionId>" : ID[4,99] : "</DivisionId>"
OUTPUTXML:="<DivisionName>" : DIV.DESC : "</DivisionName>"
OUTPUTXML:="<Display>" : ID[4,99]:"-":DIV.DESC : "</Display></Division>"
END
 CNT = CNT + 1
REPEAT
CLEARSELECT
RETURN
99999*
IF ERRMSG <> "" THEN
 ERRMSG = "GetCompanyList ----> JCS_GETCOMPANYLIST --->" : ERRMSG
CALL WRITELOG(ERRMSG)
END
RETURN
