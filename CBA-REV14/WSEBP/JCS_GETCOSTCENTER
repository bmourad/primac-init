 SUBROUTINE JCS_GETCOSTCENTER(CONO,OUTPUTXML,SCHEMA.ONLY)
 SCHEMA.ONLY = 1
 ERRMSG=""
 CNT = 1
 $INCLUDE PMC.CPYLIB COMPANY
 $INCLUDE PMC.CPYLIB COST.CNTR
 OPEN "COMPANY" TO COMPANY ELSE ERRMSG="CANNOT OPEN COMPANY FILE";GOTO 99999
 OPEN "COST.CNTR" TO COST.CNTR ELSE ERRMSG="CANNOT OPEN COST.CNTR FILE"; GOTO 99999
 IF CONO = "*" THEN
   CMD= "SSELECT COST.CNTR"
 END ELSE 
   MATREAD COMP.REC FROM COMPANY,CONO ELSE
     ERRMSG=CONO:"- THIS COMPANY NUMBER DOES NOT EXIST"
     GOTO 99999
   END
   CMD= "SSELECT COST.CNTR WITH @ID LIKE '" : CONO : "...'"
 END
 UDTEXECUTE CMD
 DATA=1
 LOOP
   READNEXT ID ELSE DATA=0
 WHILE DATA DO
   SCHEMA.ONLY = 0
   CCTR.DESC=''
   MATREAD CCTR.REC FROM COST.CNTR, ID ELSE
     ERRMSG = "COST CENTER NOT FOUND"
     GOTO 99999
   END
   OUTPUTXML:="<CostCenter>"
   OUTPUTXML:="<Cono>" : ID[1,3] : "</Cono>"
   OUTPUTXML:="<CCTRID>" : ID[4,3] : "</CCTRID>"
   OUTPUTXML:="<CCTRDepartment>" : CCTR.DEPT : "</CCTRDepartment>"
   OUTPUTXML:="<CCTRMaster>" : CCTR.MASTER : "</CCTRMaster>"
   OUTPUTXML:="<CCTRDescription>" : CCTR.DESC : "</CCTRDescription>"
   OUTPUTXML:="<CCTRType>" : CCTR.TYPE : "</CCTRType>"
   OUTPUTXML:="<CCTRSchedule>" : CCTR.SCHED.FLAG : "</CCTRSchedule>"
   OUTPUTXML:="</CostCenter>"
   CNT = CNT + 1
 REPEAT
 CLEARSELECT
 RETURN
99999*
 IF ERRMSG <> "" THEN
   ERRMSG = "GetDivisionList ----> JCS_GETDIVISIONLIST --->": ERRMSG
   CALL WRITELOG(ERRMSG)
 END
 RETURN
