*********************************************************************
* REVISION    - [08.0]
* Copyright 1982 by Computer Business Associates (Vercom Software, Inc.)
* SYSTEM      - PRIMAC
* SORCE       - JCSBP
* PROGRAM     - RCLS.DATE.MAINT
* BY          - JIHAD YAMOUT , C.B.A
* DATE        - 09/26/83
* DESCRIPTION - THIS WILL UPDATE DAILY RCLS WIHT DTR.PRT.FLG WITH '2'
*               THAT INDCATE THAT RECORD IS READY TO BE POSTED.
*********************************************************************
*
****** INSERT FILE EQUETES
*
*COPY>JCS.CPYLIB>DAILY.RCLS
*COPY>CPYLIB>SYSCOM
*COPY>CPYLIB>CHAR
*
***** SETUP ERRMSG ROUTINE
*
   SYS.TYPE = 1
   CALL SYSCOM(MAT SYSCOM.REC)
*
**** OPEN FILES
*
   OPEN '','DAILY.RCLS' TO DAILY.RCLS ELSE
      ERRMSG = 'DAILY.RCLS FILE IS MISSING'
      GOTO 93000
   END
*
****** MAIN PROCESS
*
   TODAY = DATE()
   MAT DRC.REC = ''
   DATA = 1
   LOOP
      READNEXT KEY ELSE DATA = 0
   WHILE DATA DO
      FOUND = 1
      MATREADU DRC.REC FROM DAILY.RCLS,KEY ELSE
         MAT DRC.REC = ""
         FOUND = 0
      END
      IF FOUND AND DRC.PRINT.DATE = '' THEN
         DRC.PRINT.DATE = TODAY
         MATWRITE DRC.REC ON DAILY.RCLS, KEY
      END ELSE
         RELEASE DAILY.RCLS, KEY
      END
   REPEAT
   GOTO 99999
*
***** CALL ERRMSG ROUTINE
*
91000 ERR.TYPE = 1
   CALL SYSCOM(MAT SYSCOM.REC)
   RETURN
92000 ERR.TYPE = 2
   CALL SYSCOM(MAT SYSCOM.REC)
   RETURN
93000 ERR.TYPE = 3
   CALL SYSCOM(MAT SYSCOM.REC)
*
***** END OF PROGRAM
*
99999*
END
