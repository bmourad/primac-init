LOCALFUNCTION = 0
LOCALFUNCTION = 1; !*UV,UP,UDT,UDTVMS,PI/O,PR1ME,AP,SEQ*!
!@!LOCALFUNCTION = 2; !*MRX*!
BEGIN CASE
CASE LOCALFUNCTION = 1
CONVERT OLD TO NEW IN STRING; !*UV,UP,UDT,UDTVMS,PI/O,PR1ME,AP,SEQ*!
CASE LOCALFUNCTION = 2
LEN.OLD = LEN(OLD)
FOR P = 1 TO LEN.OLD
OLDCHAR = OLD[P, 1]
NEWCHAR = NEW[P, 1]
!@!STRING = CHANGE(STRING, OLDCHAR, NEWCHAR); !*MRX*!
NEXT P
CASE 1
LEN.OLD = LEN(OLD)
LEN.STR = LEN(STRING)
IF LEN.STR THEN
FOR P = 1 TO LEN.OLD
C = OLD[P, 1]
I = INDEX(STRING, C, 1)
IF I THEN
NEWSTR = STRING[1,I-1]:NEW[P,1]
STRING = STRING[I+1, LEN.STR]
LOOP
I = INDEX(STRING, C, 1)
WHILE I DO
NEWSTR = NEWSTR:STRING[1,I-1]:NEW[P, 1]
STRING = STRING[I+1, LEN.STR]
REPEAT
STRING = NEWSTR:STRING
END
NEXT P
NEWSTR = ''
END
END CASE
